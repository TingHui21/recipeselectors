<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extra Recipes Steps for Supervised Feature Selection • recipeselectors</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Extra Recipes Steps for Supervised Feature Selection">
<meta property="og:description" content="Provides additional steps for supervised feature selection to be 
    used with the recipes package.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">recipeselectors</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/stevenpawley/recipeselectors/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="recipeselectors">recipeselectors<a class="anchor" aria-label="anchor" href="#recipeselectors"></a>
</h1></div>
<p>The goal of recipeselectors is to provide extra supervised feature
selection steps to be used with the tidymodels recipes package.</p>
<p>The package is under development.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"stevenpawley/recipeselectors"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="feature-selection-methods">Feature Selection Methods<a class="anchor" aria-label="anchor" href="#feature-selection-methods"></a>
</h2>
<p>The following feature selection methods are implemented:</p>
<ul>
<li><p><code>step_select_infgain</code> provides Information Gain
feature selection. This step requires the <code>FSelectorRcpp</code>
package to be installed.</p></li>
<li><p><code>step_select_mrmr</code> provides maximum Relevancy Minimum
Redundancy feature selection. This step requires the
<code>praznik</code> package to be installed.</p></li>
<li><p><code>step_select_roc</code> provides ROC-based feature selection
based on each predictors’ relationship with the response outcomeas
measured using a Receiver Operating Characteristic curve. Thanks to Max
Kuhn, along with many other useful suggestions.</p></li>
<li><p><code>step_select_xtab</code> provides feature selection using
statistical association (also thanks to Max Kuhn).</p></li>
<li><p><code>step_select_vip</code> provides model-based selection using
feature importance scores or coefficients. This method allows a
<code>parsnip</code> model specification to be used to select a subset
of features based on the models’ feature importances or coefficients.
See below for details. Note, that this step will eventually be
deprecated in favor of separate steps that contain the specific models
that are most commonly used for feature selection such as
<code>step_select_forests</code>, <code>step_select_tree</code> and
<code>step_select_linear</code>.</p></li>
<li><p><code>step_select_boruta</code> provides a Boruta feature
selection step.</p></li>
<li><p><code>step_select_carscore</code> provides a CAR score feature
selection step for regression models. This step requires the
<code>care</code> package to be installed.</p></li>
<li><p><code>step_select_forests</code>, <code>step_select_tree</code>,
and <code>step_select_linear</code> provide model-based methods of
selecting a subset of features based on the model’s feature importance
scores or coefficients. These steps, and potential
<code>step_select_rules</code>, <code>step_select_boost</code> will
replace the <code>step_select_vip</code> method.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="under-development">Under Development<a class="anchor" aria-label="anchor" href="#under-development"></a>
</h2>
<p>Methods that are planned to be added:</p>
<ul>
<li><p>Relief-based methods (CORElearn package)</p></li>
<li><p>Ensemble feature selection (EFS package)</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="notes-on-wrapper-feature-selection-methods">Notes on Wrapper Feature Selection Methods<a class="anchor" aria-label="anchor" href="#notes-on-wrapper-feature-selection-methods"></a>
</h2>
<p>The focus of <code>recipeselectors</code> is to provide extra recipes
for filter-based feature selection. A single wrapper method is also
included using the variable importance scores of selected algorithms for
feature selection.</p>
<p>The <code>step_select_vip</code> is designed to work with the
<code>parsnip</code> package and requires a base model specification
that provides a method of ranking the importance of features, such as
feature importance scores or coefficients, with one score per feature.
The base model is specified in the step using the <code>model</code>
parameter.</p>
<p>A limitation is that the model used in the
<code>step_select_vip</code> cannot be tuned. This step will be replaced
by a more appropriate structure that allows both variable selection and
tuning for specific model types.</p>
<p>The parsnip package does not currently contain a method of pulling
feature importance scores from models that support them. The
<code>recipeselectors</code> package provides a generic function
<code>pull_importances</code> for this purpose that accepts a fitted
parsnip model, and returns a tibble with two columns ‘feature’ and
‘importance’:</p>
<pre><code><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">boost_tree</span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"classification"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu">set_engine</span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span>

<span class="va">model_fit</span> <span class="op">&lt;-</span> <span class="va">model</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">fit</span><span class="op">(</span><span class="va">Species</span> <span class="op">~</span><span class="va">.</span>, <span class="va">iris</span><span class="op">)</span>

<span class="fu"><a href="reference/pull_importances.html">pull_importances</a></span><span class="op">(</span><span class="va">model_fit</span><span class="op">)</span></code></pre>
<p>Most of the models and ‘engines’ that provide feature importances are
implemented. In addition, <code>h2o</code> models are supported using
the <code>h2oparsnip</code> package. Use
<code>methods(pull_importances)</code> to list models that are currently
implemented. If need to pull the feature importance scores from a model
that is not currently supported in this package, then you can add a
class to the pull_importances generic function which returns a
two-column tibble:</p>
<pre><code><span class="va">pull_importances._ranger</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">scaled</span> <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">scores</span> <span class="op">&lt;-</span> <span class="fu">ranger</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ranger/man/importance.ranger.html" class="external-link">importance</a></span><span class="op">(</span><span class="va">object</span><span class="op">$</span><span class="va">fit</span><span class="op">)</span>

  <span class="co"># create a tibble with 'feature' and 'importance' columns</span>
  <span class="va">scores</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>
    feature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">scores</span><span class="op">)</span>,
    importance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">scores</span><span class="op">)</span>
  <span class="op">)</span>

  <span class="co"># optionally rescale the importance scores</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">scaled</span><span class="op">)</span>
    <span class="va">scores</span><span class="op">$</span><span class="va">importance</span> <span class="op">&lt;-</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/rescale.html" class="external-link">rescale</a></span><span class="op">(</span><span class="va">scores</span><span class="op">$</span><span class="va">importance</span><span class="op">)</span>
  <span class="va">scores</span>
<span class="op">}</span></code></pre>
<p>An example of using the step_importance function:</p>
<pre><code><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/parsnip" class="external-link">parsnip</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/recipes" class="external-link">recipes</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span>

<span class="co"># load the example iris dataset</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>

<span class="co"># define a base model to use for feature importances</span>
<span class="va">base_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/rand_forest.html" class="external-link">rand_forest</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"classification"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine</a></span><span class="op">(</span><span class="st">"ranger"</span>, importance <span class="op">=</span> <span class="st">"permutation"</span><span class="op">)</span>

<span class="co"># create a preprocessing recipe</span>
<span class="va">rec</span> <span class="op">&lt;-</span> <span class="va">iris</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
<span class="fu"><a href="https://recipes.tidymodels.org/reference/recipe.html" class="external-link">recipe</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">~</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
<span class="fu"><a href="reference/step_select_vip.html">step_select_vip</a></span><span class="op">(</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/has_role.html" class="external-link">all_predictors</a></span><span class="op">(</span><span class="op">)</span>, model <span class="op">=</span> <span class="va">base_model</span>, top_p <span class="op">=</span> <span class="fl">2</span>,
                outcome <span class="op">=</span> <span class="st">"Species"</span><span class="op">)</span>

<span class="va">prepped</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/prep.html" class="external-link">prep</a></span><span class="op">(</span><span class="va">rec</span><span class="op">)</span>

<span class="co"># create a model specification</span>
<span class="va">clf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/decision_tree.html" class="external-link">decision_tree</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"classification"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
<span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine</a></span><span class="op">(</span><span class="st">"rpart"</span><span class="op">)</span>

<span class="va">clf_fitted</span> <span class="op">&lt;-</span> <span class="va">clf</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">~</span> <span class="va">.</span>, <span class="fu"><a href="https://recipes.tidymodels.org/reference/juice.html" class="external-link">juice</a></span><span class="op">(</span><span class="va">prepped</span><span class="op">)</span><span class="op">)</span></code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/stevenpawley/recipeselectors/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/stevenpawley/recipeselectors/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing recipeselectors</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Steven Pawley <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Steven Pawley.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
